<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Nosotros | Comunidad Barrio Libertador</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet"> 

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
    /* Fondo del modal más opaco */
    .modal-backdrop.show {
        opacity: 0.9 !important; 
    }
    .modal-header {
        background-color: #21213b; 
        color: #fff;
    }
    .modal-header .modal-title {
        color: #fff;
    }
    </style>
</head>

<body>
    <!-- Modal de opciones de comunidad -->
<div class="modal fade" id="communityId" tabindex="-1" aria-labelledby="communityId" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5 class="modal-title" id="communityId">ELIGE TU COMUNIDAD</h5>
            </div>
            <div class="modal-body">
                <div class="list-group" id="community-list-group">
                    <!-- Los botones de comunidad se generarán dinámicamente aquí -->
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Cargando...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top p-0">
        <a href="index.html" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
            <img src="img/logo.png" alt="Logo Comunidad Barrio Libertador" style="height: 60px; width: 200px;" />
        </a>
        <button id="mostrarComunidad" class="btn btn-outline-primary rounded-pill px-3 py-1 ms-lg-3 d-none">
    <i class="fa fa-map-marker-alt text-primary me-2"></i>
    <span id="comunidadElegida"></span>
</button>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0">
                <a href="index.html" class="nav-item nav-link">Inicio</a>
                <a href="team.html" class="nav-item nav-link active">Nosotros</a>
                <a href="posts.html" class="nav-item nav-link">Publicaciones</a>
                <a href="services.html" class="nav-item nav-link">Servicios</a>
            </div>
            <a href="contact.html" class="btn btn-primary py-4 px-lg-5 d-none d-lg-block">CONTACTO<i class="fa fa-arrow-right ms-3"></i></a>
        </div>
        </nav>
    <!-- Navbar End -->


    <!-- Page Header Start -->
    <div class="container-fluid page-header py-5 mb-5">
        <div class="container py-5">
            <h1 class="display-3 text-white mb-3 animated slideInDown">Sobre Nosotros</h1>
        </div>
    </div>
    <!-- Page Header End -->

    <!-- About Start -->
    <div class="container-fluid bg-light overflow-hidden my-5 px-lg-0">
        <div class="container about px-lg-0">
            <div class="row g-0 mx-lg-0">
                <div class="col-lg-6 ps-lg-0" style="min-height: 400px;">
                    <div class="position-relative h-100">
                        <img class="position-absolute img-fluid w-100 h-100" src="img/about.jpg" style="object-fit: cover;" alt="">
                    </div>
                </div>
                <div class="col-lg-6 about-text py-5 wow fadeIn" data-wow-delay="0.5s">
                    <div class="p-lg-5 pe-lg-0">
                        <div class="section-title text-start">
                            <h1 class="display-5 mb-4">Sobre Nosotros</h1>
                        </div>
                        <p class="mb-4 pb-2">Somos el Concejo Comunal del Barrio Libertador, una organización popular conformada por vecinos y
                        vecinas comprometidas con el desarrollo integral de
                        nuestra comunidad.</p>
                        <div class="row g-4 mb-4 pb-2">
                            <div class="col-sm-6 wow fadeIn" data-wow-delay="0.1s">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
                                        <i class="fa fa-users fa-2x text-primary"></i>
                                    </div>
                                    <div class="ms-3">
                                        <h2 class="text-primary mb-1" data-toggle="counter-up">560</h2>
                                        <p class="fw-medium mb-0">Personas</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 wow fadeIn" data-wow-delay="0.3s">
                                <div class="d-flex align-items-center">
                                    <div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
                                        <i class="fa fa-check fa-2x text-primary"></i>
                                    </div>
                                    <div class="ms-3">
                                        <h2 class="text-primary mb-1" data-toggle="counter-up">12</h2>
                                        <p class="fw-medium mb-0">Proyectos Aprobados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="" class="btn btn-primary py-3 px-5">Leer más</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- About End -->

    <!-- Projects Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row mt-n2 wow fadeInUp" data-wow-delay="0.3s">
                
            </div>
            <div class="row g-4 portfolio-container">
                <div class="col-lg-6 col-md-6 portfolio-item first wow fadeInUp" data-wow-delay="0.1s">
                    <div class="rounded overflow-hidden">
                        <div class="position-relative overflow-hidden">
                            <img class="img-fluid w-100" src="img/portfolio-1.jpg" alt="">
                            <div class="portfolio-overlay">
                                <a class="btn btn-square btn-outline-light mx-1" href="img/portfolio-1.jpg"
                                    data-lightbox="portfolio"><i class="fa fa-eye"></i></a>
                                <a class="btn btn-square btn-outline-light mx-1" href=""><i class="fa fa-link"></i></a>
                            </div>
                        </div>
                        <div class="border border-5 border-light border-top-0 p-4">
                            <p class="text-primary fw-medium mb-2">MISIÓN</p>
                            <h5 class="lh-base mb-0">Trabajar de forma organizada y participativa junto a la comunidad para
                                promover el
                                desarrollo integral del sector, impulsando
                                proyectos sociales, culturales, económicos y
                                de infraestructura que mejoren la calidad de
                                vida de todos los habitantes.</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 portfolio-item second wow fadeInUp" data-wow-delay="0.3s">
                    <div class="rounded overflow-hidden">
                        <div class="position-relative overflow-hidden">
                            <img class="img-fluid w-100" src="img/portfolio-2.jpg" alt="">
                            <div class="portfolio-overlay">
                                <a class="btn btn-square btn-outline-light mx-1" href="img/portfolio-2.jpg"
                                    data-lightbox="portfolio"><i class="fa fa-eye"></i></a>
                                <a class="btn btn-square btn-outline-light mx-1" href=""><i class="fa fa-link"></i></a>
                            </div>
                        </div>
                        <div class="border border-5 border-light border-top-0 p-4">
                            <p class="text-primary fw-medium mb-2">VISION</p>
                            <h5 class="lh-base mb-0">Ser una comunidad modelo, unida y autosustentable, reconocida por su
                                compromiso social, su participación activa y
                                su capacidad para construir soluciones
                                colectivas que garanticen el bienestar
                                presente y futuro de sus ciudadanos.</a>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    <!-- Projects End -->

    <!-- Team Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="section-title text-center">
                <h1 class="display-5 mb-5">Jefes de la Comunidad</h1>
            </div>
            <div class="row g-4">
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="team-item">
                        <div class="overflow-hidden position-relative">
                            <img class="img-fluid" src="img/team-1.jpg" alt="">
                            
                        </div>
                        <div class="text-center border border-5 border-light border-top-0 p-4">
                            <h5 class="mb-0">Rafael Urdaneta</h5>
                            <small>Ruby Ordoñez</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                    <div class="team-item">
                        <div class="overflow-hidden position-relative">
                            <img class="img-fluid" src="img/team-2.jpg" alt="">
                            
                        </div>
                        <div class="text-center border border-5 border-light border-top-0 p-4">
                            <h5 class="mb-0">Libertador Sineral</h5>
                            <small>Luis Carvajal</small>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                    <div class="team-item">
                        <div class="overflow-hidden position-relative">
                            <img class="img-fluid" src="img/team-3.jpg" alt="">
                            
                        </div>
                        <div class="text-center border border-5 border-light border-top-0 p-4">
                            <h5 class="mb-0">Lote G Pirineos I</h5>
                            <small>Selina Verdeci</small>
                        </div>
                    </div>
                </div>
                    <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.7s">
                        <div class="team-item">
                            <div class="overflow-hidden position-relative">
                                <img class="img-fluid" src="img/team-4.jpg" alt="">
                                
                            </div>
                            <div class="text-center border border-5 border-light border-top-0 p-4">
                                <h5 class="mb-0">Lote H Rio Zuñiga</h5>
                                <small>Carmen Correa</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
    <!-- Team End -->
        
        <!-- Testimonial Start -->
        <div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
            <div class="container">
                <div class="section-title text-center">
                    <h1 class="display-5 mb-5">Testimonios de la Comunidad</h1>
                </div>
                <div class="owl-carousel testimonial-carousel">
                    <div class="testimonial-item text-center">
                        <img class="img-fluid bg-light p-2 mx-auto mb-3" src="img/testimonial-1.jpg"
                            style="width: 90px; height: 90px;">
                        <div class="testimonial-text text-center p-4">
                            <p>Teníamos meses con un problema de filtración de agua en la calle principal. Gracias a que nos organizamos como vecinos,
                            hicimos reuniones y definimos un plan de acción conjunto, pudimos recolectar fondos y gestionar la reparación. Ver cómo
                            la colaboración de todos trajo una solución nos llena de satisfacción
                            </p>
                            <h5 class="mb-1">María González</h5>
                            <span class="fst-italic">Vecina de la Comunidad</span>
                        </div>
                    </div>
                    <div class="testimonial-item text-center">
                        <img class="img-fluid bg-light p-2 mx-auto mb-3" src="img/testimonial-2.jpg"
                            style="width: 90px; height: 90px;">
                        <div class="testimonial-text text-center p-4">
                            <p>La jornada de limpieza y recuperación de la cancha deportiva del sector fue un éxito total. Desde los más jóvenes hasta los
                            abuelos colaboraron. Pintamos, recogimos la basura... Ver el espacio transformado gracias al esfuerzo
                            colectivo es la mejor muestra de lo que podemos lograr si trabajamos organizados y en equipo.
                            </p>
                            <h5 class="mb-1">Carlos Pérez</h5>
                            <span class="fst-italic">Vecino de la Comunidad</span>
                        </div>
                    </div>
                    <div class="testimonial-item text-center">
                        <img class="img-fluid bg-light p-2 mx-auto mb-3" src="img/testimonial-3.jpg"
                            style="width: 90px; height: 90px;">
                        <div class="testimonial-text text-center p-4">
                            <p>Lo que más valoro de nuestra comunidad es cómo hemos aprendido a colaborar. Nos organizamos para todo, desde coordinar
                            la seguridad hasta para apoyarnos si algún vecino tiene una necesidad. Esta organización nos ha unido más y ha mejorado
                            nuestra calidad de vida. Saber que cuentas con tus vecinos no tiene precio.
                            </p>
                            <h5 class="mb-1">Juan Roque</h5>
                            <span class="fst-italic">Vecino de la Comunidad</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Testimonial End -->

    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-light mb-4">DIRECCIÓN</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Barrio Libertador, Parte Baja, Táchira, Venezuela</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+58 412-6574321</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@gmail.com</p>
                 
                </div>
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-light mb-4">PROYECTOS</h4>
                    <a class="btn btn-link" href="">Rehabilitacion de Áreas Verdes</a>
                    <a class="btn btn-link" href="">Plan Comunitario de Seguridad</a>
                    <a class="btn btn-link" href="">Programa de Alimentación</a>
                </div>
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-light mb-4">ENLACES</h4>
                    <a class="btn btn-link" href="index.html">Inicio</a>
                    <a class="btn btn-link" href="services.html">Servicios</a>
                    <a class="btn btn-link" href="posts.html">Publicaciones</a>
                    <a class="btn btn-link" href="team.html">Nosotros</a>
                    <a class="btn btn-link" href="contact.html">Contacto</a>
                </div>
                
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; 2025 <a class="border-bottom" href="#"> Concejo Comunal Barrio Libertador</a>, Todos los derechos reservados.
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                        Diseñado por: Equipo E09-SIST-1-2025
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-0 back-to-top"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    

<script>
function renderCommunityButtons(communities) {
    const listGroup = document.getElementById('community-list-group');
    listGroup.innerHTML = '';
    if (!communities || communities.length === 0) {
        listGroup.innerHTML = '<div class="text-center text-muted">No hay comunidades disponibles.</div>';
        return;
    }
    communities.forEach(comunidad => {
        const btn = document.createElement('button');
        btn.className = 'list-group-item list-group-item-action d-flex align-items-center border border-3 border-primary rounded-pill mb-3 px-4 py-3';
        btn.onclick = function() { skip(comunidad.id, comunidad.name); };
        btn.innerHTML = '<i class="fa fa-map-marker-alt text-primary me-2"></i> ' + comunidad.name;
        listGroup.appendChild(btn);
    });
}

function fetchCommunities() {
    const listGroup = document.getElementById('community-list-group');
    listGroup.innerHTML = '<div class="text-center text-muted">Cargando comunidades...</div>';
    fetch('https://cs-backend-35kl.onrender.com/api/communities')
        .then(response => {
            if (!response.ok) {
                throw new Error('Error en la respuesta de la API');
            }
            return response.json();
        })
        .then(data => {
            let communities = [];
            if (Array.isArray(data)) {
                communities = data;
            } else if (Array.isArray(data.communities)) {
                communities = data.communities;
            } else if (Array.isArray(data.data)) {
                communities = data.data;
            } else {
                throw new Error('Formato inesperado de la respuesta de la API');
            }
            renderCommunityButtons(communities);
        })
        .catch((error) => {
            console.error('Error al cargar comunidades:', error);
            listGroup.innerHTML = '<div class="text-center text-danger">Error al cargar comunidades.</div>';
        });
}

document.addEventListener('DOMContentLoaded', function() {
    fetchCommunities();

    const comunidadId = localStorage.getItem('communityId');
    var communityModal = new bootstrap.Modal(document.getElementById('communityId'));

    if (!comunidadId) {
        communityModal.show();
    } else {
        // Busca el nombre correspondiente al id guardado
        fetch('https://cs-backend-35kl.onrender.com/api/communities')
            .then(res => res.json())
            .then(data => {
                let communities = [];
                if (Array.isArray(data)) {
                    communities = data;
                } else if (Array.isArray(data.communities)) {
                    communities = data.communities;
                } else if (Array.isArray(data.data)) {
                    communities = data.data;
                }
                const selected = communities.find(c => String(c.id) === comunidadId);
                if (selected) {
                    document.getElementById('comunidadElegida').textContent = selected.name;
                    document.getElementById('mostrarComunidad').classList.remove('d-none');
                }
            });
    }

    window.skip = function(id, name) {
        // Guarda solo el id en localStorage
        localStorage.setItem('communityId', id);
        communityModal.hide();
        // Muestra el nombre en el botón
        document.getElementById('comunidadElegida').textContent = name;
        document.getElementById('mostrarComunidad').classList.remove('d-none');
    }

    document.getElementById('mostrarComunidad').addEventListener('click', function() {
        communityModal.show();
    });
});

  // Cargar textos de Misión y Visión desde el backend
    fetch('https://cs-backend-35kl.onrender.com/api/community_information')
        .then(res => res.json())
        .then(data => {
            let info = [];
            if (Array.isArray(data)) {
                info = data;
            } else if (Array.isArray(data.data)) {
                info = data.data;
            }
            // Buscar misión, visión y about
            const mision = info.find(i => i.title && i.title.toUpperCase() === 'MISSION');
            const vision = info.find(i => i.title && i.title.toUpperCase() === 'VISION');
            const about = info.find(i => i.title && i.title.toUpperCase() === 'ABOUT');
            // Insertar textos en los h5 correspondientes
            if (mision) {
                const misionH5 = document.querySelector('.portfolio-item.first h5');
                if (misionH5) misionH5.textContent = mision.value;
            }
            if (vision) {
                const visionH5 = document.querySelector('.portfolio-item.second h5');
                if (visionH5) visionH5.textContent = vision.value;
            }
            // Cambiar el texto "Sobre Nosotros"
            if (about) {
                const aboutP = document.querySelector('.about-text p');
                if (aboutP) aboutP.textContent = about.value;
            }
        });

    // Cargar testimonios dinámicamente
    fetch('https://cs-backend-35kl.onrender.com/api/testimonies')
        .then(res => res.json())
        .then(data => {
            let testimonies = [];
            if (Array.isArray(data)) {
                testimonies = data;
            } else if (Array.isArray(data.data)) {
                testimonies = data.data;
            }
            // Ordenar por fecha descendente y tomar solo los 3 más recientes
            testimonies = testimonies
                .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
                .slice(0, 3);

            const testimonialCarousel = document.querySelector('.testimonial-carousel');
            if (testimonialCarousel) {
                testimonialCarousel.innerHTML = '';
                testimonies.forEach((testimonio) => {
                    testimonialCarousel.innerHTML += `
                        <div class="testimonial-item text-center">
                            <div class="testimonial-text text-center p-4">
                                <p style="font-size: 1.9em;">${testimonio.comment}</p>
                                <h5 class="mb-1" style="font-size: 1.5em;">${testimonio.name}</h5>
                                <span class="fst-italic" style="font-size: 1.4em;">${testimonio.community && testimonio.community.name ? testimonio.community.name : 'Vecino de la Comunidad'}</span>
                            </div>
                        </div>
                    `;
                });
                // Si usas Owl Carousel, recarga el carrusel:
                if ($(testimonialCarousel).hasClass('owl-carousel')) {
                    $(testimonialCarousel).trigger('destroy.owl.carousel');
                    $(testimonialCarousel).owlCarousel({
                        autoplay: true,
                        smartSpeed: 1000,
                        items: 1,
                        dots: true,
                        loop: true,
                        nav: false
                    });
                }
            }
        });

</script>
</body>

</html>